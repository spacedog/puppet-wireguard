# This file is managed by puppet
[Interface]
<%- if @address -%>
  <%- if @address.is_a? Array -%>
    <%- @address.flatten.each do |adr| -%>
Address = <%= adr %>
    <%- end -%>
  <%- else -%>
Address = <%= @address %>
  <%- end -%>
<%- end -%>
<% if @saveconfig -%>
SaveConfig = true
<% end -%>
PrivateKey = <%= @private_key %>
ListenPort = <%= @listen_port %>
<%- if @mtu -%>
MTU = <%= @mtu %>
<% end -%>
<%- if @dns -%>
DNS = <%= @dns %>
<% end -%>
<%- if @preup -%>
  <%- if @preup.is_a? Array -%>
    <%- @preup.flatten.each do |p| -%>
PreUp = <%= p %>
    <%- end -%>
  <%- else -%>
PreUp = <%= @preup %>
  <%- end -%>
<%- end -%>
<%- if @postup -%>
  <%- if @postup.is_a? Array -%>
    <%- @postup.flatten.each do |p| -%>
PostUp = <%= p %>
    <%- end -%>
  <%- else -%>
PostUp = <%= @postup %>
  <%- end -%>
<%- end -%>
<%- if @predown -%>
  <%- if @predown.is_a? Array -%>
    <%- @predown.flatten.each do |p| -%>
PreDown = <%= p %>
    <%- end -%>
  <%- else -%>
PreDown = <%= @predown %>
  <%- end -%>
<%- end -%>
<%- if @postdown -%>
  <%- if @postdown.is_a? Array -%>
    <%- @postdown.flatten.each do |p| -%>
PostDown = <%= p %>
    <%- end -%>
  <%- else -%>
PostDown = <%= @postdown %>
  <%- end -%>
<%- end -%>
<%- if @peers -%>

# Peers
    <%- @peers.each do |peer| -%>
[Peer]
        <%- peer.each do |key,value| -%>
          <%- if key == 'Comment' -%>
# <%= value %>
          <%- else -%>
<%= key %> = <%= value %>
          <%- end -%>
        <%- end %>
    <%- end -%>
<%- end -%>
